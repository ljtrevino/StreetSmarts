<!DOCTYPE html>
<html>
<head>
    <title>Design Challenges</title>
	<link rel="stylesheet" type="text/css" href="home.css">
    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.1.1/superhero/bootstrap.min.css" rel="stylesheet" integrity="sha384-fiZOWGBt79dIbkt852eb24nKPxYOvAgtp4v4IUFozlwV/WkvlilK1oTVfPorZdV4" crossorigin="anonymous">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="index.html">StreetSmarts</a>
  <button onclick="navbar()" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarColor03">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="index.html">Home<span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="map.html">Real-Time Map</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="documentation.html">Documentation</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="design.html">Design Challenges</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="parts.html">Parts List</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="code.html">Code Description</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="energy.html">Energy Management</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="about.html">About the Creators</a>
      </li>
      </ul>
  </div>
</nav>
<center><h1>Design Challenges</h1></center>
    
<div class="container">
<p>There were a series of challenges we encountered during this project. Here we highlight a few of the most difficult aspects of our project:</p>

<div onclick="ExpandIO()" class="card bg-danger mb-3" style="">
  <div class="card-header bg-dark">Wiring of the Board & I/O Pins</div>
  <div class="card-body" id="IO" style="display:none;">
    
      <p class="card-text"> One of the most difficult tasks was finding a way to adequately control the 31 LEDs that our miniature map system needed. This was because while technically there are enough GPIO pins on the ESP to control 31 LEDs, most of them are used by the board during runtime for various tasks. For instance, pin 6 was used as a clock for the microcontroller, so if we attempted to toggle it the whole board would go awry. During the testing process, we found that we could only really use 21 pins, this meant that we could only connect 16 pins directly to the LED, but the remaining 5 pins went to constructing a Charlieplexing circuit that could technically control 20 LEDs but we only needed it to control the remaining 15 LEDs. </p>
      <p>One of the challenges with Charlieplexing is that it requires an enormous amount of wiring as well as documentation of the pin positions/mapping to the Lamp IDs, so that one can easily code it once the wiring is complete. Luckily there were a reasonable amount of resources available online that helped us go through the process step-by-step.</p>
      <p>Once the wiring was completed, however, another challenge presented itself because due to the nature of the charlieplexed circuit - only one LED in the matrix was able to turn on at the same time. To go around this we used the concept of duty cycle from 6.08 in order to cycle through all of the LEDs that needed to be turned on. Because the speed of the cycling was so fast we were able to make it seem as though the LEDs were continuously on. We also made sure that the code had little opportunity to block the cycling of the LEDs, by cycling them through any loops that were present and by using state machines to minimize non-blocking code.</p>
    </div>
</div>


    
<div onclick="ExpandAPI()" class="card bg-primary mb-3" style="">
  <div class="card-header bg-dark">Efficiency & Google Distance Matrix API</div>
  <div class="card-body" id="API" style="display:none;">
    
      <p class="card-text">
      One difficult challenge was getting the Google Distance Matrix API to work when requesting multiple locations in one request. The Google Distance Matrix API was designed to find routes to and from every point imputed, so it was not possible to only get paths between specific start and end locations if there were multiple locations in the request.</p>
      <p>For example, if I wanted to find the travel time from A → B and from C → D I would make a request with <code style="color:whitesmoke">origins = [A,C]</code> and <code style="color:whitesmoke">destinations = [B,D]</code>.  However, rather than return the two paths I wanted, the API would return durations A → B, A → D, C → D, and A → D.  As you can imagine, with a larger number of origins and destinations, there are a many unnecessary duration values returned.  Furthermore, parsing through this data to try to find select routes can be quite difficult depending on how many origins and destinations in a request, and how you order these locations.  Thus, instead we performed many individual requests, which simplified parsing the data and ensured that the API didn’t do extra work of getting travel durations between points that we would never need.</p>
      <p>  Due to the sheer number of requests, initializing the adjacency matrix takes about 8 seconds on average.  However, in the grand scheme of things, it would take more than 8 seconds for responders to get in their vehicles, thus even though this code may be slow by our standards, the route would still be perfectly lit by the time the responders departed their station.</p>
    </div>
</div>
    
    
<div onclick="ExpandLIFX()" class="card bg-danger mb-3" style="">
  <div class="card-header bg-dark">LIFX API & Wifi</div>
  <div class="card-body" id="LIFX" style="display:none;">
    
      <p class="card-text">

      One challenge with LIFX API is that it cannot connect to public Wifi Networks in order to ensure a secure and reliable network connection. When we first encountered this problem we first assumed that the Bulb was broken for a couple days because it couldn’t connect to the internet in order to be used by the API. This problem was solved, however, by testing our bulb to different networks and eventually connecting the Bulb to one of our group members personal hotspots seemed to work. In the future we would want to ensure that each bulb has the capability to have either its own secure wireless connection, to prevent tampering by outside parties, or have some type of internet cable that can run up the lamp post to transfer information from the internet.  
      
      </p>
      
  </div>
</div>
    
    
</div>
</body>
<script>
    
function ExpandIO() {
    var x = document.getElementById("IO");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
} 
    
function ExpandAPI() {
    var x = document.getElementById("API");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
} 
    
function ExpandLIFX() {
    var x = document.getElementById("LIFX");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
} 
    
function navbar() {
    var x = document.getElementById("navbarColor03");
    if (x.className === "collapse navbar-collapse") {
        x.className = "navbar-collapse";
    } else {
        x.className = "collapse navbar-collapse";
    } 
   }
</script>
    
</html>
